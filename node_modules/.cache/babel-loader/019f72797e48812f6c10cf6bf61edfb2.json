{"ast":null,"code":"/**\n * @author James Baicoianu / http://www.baicoianu.com/\n */\nimport * as THREE from \"three\";\n\nvar __FlyControls;\n\n__FlyControls = function __FlyControls(object, domElement) {\n  this.object = object;\n  this.domElement = domElement !== undefined ? domElement : document;\n  if (domElement) this.domElement.setAttribute('tabindex', -1); // API\n\n  this.movementSpeed = 1.0;\n  this.rollSpeed = 0.005;\n  this.dragToLook = false;\n  this.autoForward = false; // disable default target object behavior\n  // internals\n\n  this.tmpQuaternion = new THREE.Quaternion();\n  this.mouseStatus = 0;\n  this.moveState = {\n    up: 0,\n    down: 0,\n    left: 0,\n    right: 0,\n    forward: 0,\n    back: 0,\n    pitchUp: 0,\n    pitchDown: 0,\n    yawLeft: 0,\n    yawRight: 0,\n    rollLeft: 0,\n    rollRight: 0\n  };\n  this.moveVector = new THREE.Vector3(0, 0, 0);\n  this.rotationVector = new THREE.Vector3(0, 0, 0);\n\n  this.handleEvent = function (event) {\n    if (typeof this[event.type] == 'function') {\n      this[event.type](event);\n    }\n  };\n\n  this.keydown = function (event) {\n    if (event.altKey) {\n      return;\n    } //event.preventDefault();\n\n\n    switch (event.keyCode) {\n      case 16:\n        /* shift */\n        this.movementSpeedMultiplier = .1;\n        break;\n\n      case 87:\n        /*W*/\n        this.moveState.forward = 1;\n        break;\n\n      case 83:\n        /*S*/\n        this.moveState.back = 1;\n        break;\n\n      case 65:\n        /*A*/\n        this.moveState.left = 1;\n        break;\n\n      case 68:\n        /*D*/\n        this.moveState.right = 1;\n        break;\n\n      case 82:\n        /*R*/\n        this.moveState.up = 1;\n        break;\n\n      case 70:\n        /*F*/\n        this.moveState.down = 1;\n        break;\n\n      case 38:\n        /*up*/\n        this.moveState.pitchUp = 1;\n        break;\n\n      case 40:\n        /*down*/\n        this.moveState.pitchDown = 1;\n        break;\n\n      case 37:\n        /*left*/\n        this.moveState.yawLeft = 1;\n        break;\n\n      case 39:\n        /*right*/\n        this.moveState.yawRight = 1;\n        break;\n\n      case 81:\n        /*Q*/\n        this.moveState.rollLeft = 1;\n        break;\n\n      case 69:\n        /*E*/\n        this.moveState.rollRight = 1;\n        break;\n    }\n\n    this.updateMovementVector();\n    this.updateRotationVector();\n  };\n\n  this.keyup = function (event) {\n    switch (event.keyCode) {\n      case 16:\n        /* shift */\n        this.movementSpeedMultiplier = 1;\n        break;\n\n      case 87:\n        /*W*/\n        this.moveState.forward = 0;\n        break;\n\n      case 83:\n        /*S*/\n        this.moveState.back = 0;\n        break;\n\n      case 65:\n        /*A*/\n        this.moveState.left = 0;\n        break;\n\n      case 68:\n        /*D*/\n        this.moveState.right = 0;\n        break;\n\n      case 82:\n        /*R*/\n        this.moveState.up = 0;\n        break;\n\n      case 70:\n        /*F*/\n        this.moveState.down = 0;\n        break;\n\n      case 38:\n        /*up*/\n        this.moveState.pitchUp = 0;\n        break;\n\n      case 40:\n        /*down*/\n        this.moveState.pitchDown = 0;\n        break;\n\n      case 37:\n        /*left*/\n        this.moveState.yawLeft = 0;\n        break;\n\n      case 39:\n        /*right*/\n        this.moveState.yawRight = 0;\n        break;\n\n      case 81:\n        /*Q*/\n        this.moveState.rollLeft = 0;\n        break;\n\n      case 69:\n        /*E*/\n        this.moveState.rollRight = 0;\n        break;\n    }\n\n    this.updateMovementVector();\n    this.updateRotationVector();\n  };\n\n  this.mousedown = function (event) {\n    if (this.domElement !== document) {\n      this.domElement.focus();\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.dragToLook) {\n      this.mouseStatus++;\n    } else {\n      switch (event.button) {\n        case 0:\n          this.moveState.forward = 1;\n          break;\n\n        case 2:\n          this.moveState.back = 1;\n          break;\n      }\n\n      this.updateMovementVector();\n    }\n  };\n\n  this.mousemove = function (event) {\n    if (!this.dragToLook || this.mouseStatus > 0) {\n      var container = this.getContainerDimensions();\n      var halfWidth = container.size[0] / 2;\n      var halfHeight = container.size[1] / 2;\n      this.moveState.yawLeft = -(event.pageX - container.offset[0] - halfWidth) / halfWidth;\n      this.moveState.pitchDown = (event.pageY - container.offset[1] - halfHeight) / halfHeight;\n      this.updateRotationVector();\n    }\n  };\n\n  this.mouseup = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.dragToLook) {\n      this.mouseStatus--;\n      this.moveState.yawLeft = this.moveState.pitchDown = 0;\n    } else {\n      switch (event.button) {\n        case 0:\n          this.moveState.forward = 0;\n          break;\n\n        case 2:\n          this.moveState.back = 0;\n          break;\n      }\n\n      this.updateMovementVector();\n    }\n\n    this.updateRotationVector();\n  };\n\n  this.update = function (delta) {\n    var moveMult = delta * this.movementSpeed;\n    var rotMult = delta * this.rollSpeed;\n    this.object.translateX(this.moveVector.x * moveMult);\n    this.object.translateY(this.moveVector.y * moveMult);\n    this.object.translateZ(this.moveVector.z * moveMult);\n    this.tmpQuaternion.set(this.rotationVector.x * rotMult, this.rotationVector.y * rotMult, this.rotationVector.z * rotMult, 1).normalize();\n    this.object.quaternion.multiply(this.tmpQuaternion); // expose the rotation vector for convenience\n\n    this.object.rotation.setFromQuaternion(this.object.quaternion, this.object.rotation.order);\n  };\n\n  this.updateMovementVector = function () {\n    var forward = this.moveState.forward || this.autoForward && !this.moveState.back ? 1 : 0;\n    this.moveVector.x = -this.moveState.left + this.moveState.right;\n    this.moveVector.y = -this.moveState.down + this.moveState.up;\n    this.moveVector.z = -forward + this.moveState.back; //console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n  };\n\n  this.updateRotationVector = function () {\n    this.rotationVector.x = -this.moveState.pitchDown + this.moveState.pitchUp;\n    this.rotationVector.y = -this.moveState.yawRight + this.moveState.yawLeft;\n    this.rotationVector.z = -this.moveState.rollRight + this.moveState.rollLeft; //console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n  };\n\n  this.getContainerDimensions = function () {\n    if (this.domElement != document) {\n      return {\n        size: [this.domElement.offsetWidth, this.domElement.offsetHeight],\n        offset: [this.domElement.offsetLeft, this.domElement.offsetTop]\n      };\n    } else {\n      return {\n        size: [window.innerWidth, window.innerHeight],\n        offset: [0, 0]\n      };\n    }\n  };\n\n  function bind(scope, fn) {\n    return function () {\n      fn.apply(scope, arguments);\n    };\n  }\n\n  ;\n  this.domElement.addEventListener('contextmenu', function (event) {\n    event.preventDefault();\n  }, false);\n  this.domElement.addEventListener('mousemove', bind(this, this.mousemove), false);\n  this.domElement.addEventListener('mousedown', bind(this, this.mousedown), false);\n  this.domElement.addEventListener('mouseup', bind(this, this.mouseup), false);\n  this.domElement.addEventListener('keydown', bind(this, this.keydown), false);\n  this.domElement.addEventListener('keyup', bind(this, this.keyup), false);\n  this.updateMovementVector();\n  this.updateRotationVector();\n};\n\nexport { __FlyControls as FlyControls };","map":{"version":3,"sources":["/Users/admin/Documents/GitHub/group21WildLifeRefuge/src/js/three/FlyControls.js"],"names":["THREE","__FlyControls","object","domElement","undefined","document","setAttribute","movementSpeed","rollSpeed","dragToLook","autoForward","tmpQuaternion","Quaternion","mouseStatus","moveState","up","down","left","right","forward","back","pitchUp","pitchDown","yawLeft","yawRight","rollLeft","rollRight","moveVector","Vector3","rotationVector","handleEvent","event","type","keydown","altKey","keyCode","movementSpeedMultiplier","updateMovementVector","updateRotationVector","keyup","mousedown","focus","preventDefault","stopPropagation","button","mousemove","container","getContainerDimensions","halfWidth","size","halfHeight","pageX","offset","pageY","mouseup","update","delta","moveMult","rotMult","translateX","x","translateY","y","translateZ","z","set","normalize","quaternion","multiply","rotation","setFromQuaternion","order","offsetWidth","offsetHeight","offsetLeft","offsetTop","window","innerWidth","innerHeight","bind","scope","fn","apply","arguments","addEventListener","FlyControls"],"mappings":"AAAA;;;AAIA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;AAEA,IAAIC,aAAJ;;AAEAA,aAAa,GAAG,uBAAWC,MAAX,EAAmBC,UAAnB,EAAgC;AAE/C,OAAKD,MAAL,GAAcA,MAAd;AAEA,OAAKC,UAAL,GAAoBA,UAAU,KAAKC,SAAjB,GAA+BD,UAA/B,GAA4CE,QAA9D;AACA,MAAKF,UAAL,EAAkB,KAAKA,UAAL,CAAgBG,YAAhB,CAA8B,UAA9B,EAA0C,CAAC,CAA3C,EAL6B,CAO/C;;AAEA,OAAKC,aAAL,GAAqB,GAArB;AACA,OAAKC,SAAL,GAAiB,KAAjB;AAEA,OAAKC,UAAL,GAAkB,KAAlB;AACA,OAAKC,WAAL,GAAmB,KAAnB,CAb+C,CAe/C;AAEA;;AAEA,OAAKC,aAAL,GAAqB,IAAIX,KAAK,CAACY,UAAV,EAArB;AAEA,OAAKC,WAAL,GAAmB,CAAnB;AAEA,OAAKC,SAAL,GAAiB;AAAEC,IAAAA,EAAE,EAAE,CAAN;AAASC,IAAAA,IAAI,EAAE,CAAf;AAAkBC,IAAAA,IAAI,EAAE,CAAxB;AAA2BC,IAAAA,KAAK,EAAE,CAAlC;AAAqCC,IAAAA,OAAO,EAAE,CAA9C;AAAiDC,IAAAA,IAAI,EAAE,CAAvD;AAA0DC,IAAAA,OAAO,EAAE,CAAnE;AAAsEC,IAAAA,SAAS,EAAE,CAAjF;AAAoFC,IAAAA,OAAO,EAAE,CAA7F;AAAgGC,IAAAA,QAAQ,EAAE,CAA1G;AAA6GC,IAAAA,QAAQ,EAAE,CAAvH;AAA0HC,IAAAA,SAAS,EAAE;AAArI,GAAjB;AACA,OAAKC,UAAL,GAAkB,IAAI3B,KAAK,CAAC4B,OAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAAlB;AACA,OAAKC,cAAL,GAAsB,IAAI7B,KAAK,CAAC4B,OAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAAtB;;AAEA,OAAKE,WAAL,GAAmB,UAAWC,KAAX,EAAmB;AAErC,QAAK,OAAO,KAAMA,KAAK,CAACC,IAAZ,CAAP,IAA6B,UAAlC,EAA+C;AAE9C,WAAMD,KAAK,CAACC,IAAZ,EAAoBD,KAApB;AAEA;AAED,GARD;;AAUA,OAAKE,OAAL,GAAe,UAAUF,KAAV,EAAkB;AAEhC,QAAKA,KAAK,CAACG,MAAX,EAAoB;AAEnB;AAEA,KAN+B,CAQhC;;;AAEA,YAASH,KAAK,CAACI,OAAf;AAEC,WAAK,EAAL;AAAS;AAAY,aAAKC,uBAAL,GAA+B,EAA/B;AAAmC;;AAExD,WAAK,EAAL;AAAS;AAAM,aAAKtB,SAAL,CAAeK,OAAf,GAAyB,CAAzB;AAA4B;;AAC3C,WAAK,EAAL;AAAS;AAAM,aAAKL,SAAL,CAAeM,IAAf,GAAsB,CAAtB;AAAyB;;AAExC,WAAK,EAAL;AAAS;AAAM,aAAKN,SAAL,CAAeG,IAAf,GAAsB,CAAtB;AAAyB;;AACxC,WAAK,EAAL;AAAS;AAAM,aAAKH,SAAL,CAAeI,KAAf,GAAuB,CAAvB;AAA0B;;AAEzC,WAAK,EAAL;AAAS;AAAM,aAAKJ,SAAL,CAAeC,EAAf,GAAoB,CAApB;AAAuB;;AACtC,WAAK,EAAL;AAAS;AAAM,aAAKD,SAAL,CAAeE,IAAf,GAAsB,CAAtB;AAAyB;;AAExC,WAAK,EAAL;AAAS;AAAO,aAAKF,SAAL,CAAeO,OAAf,GAAyB,CAAzB;AAA4B;;AAC5C,WAAK,EAAL;AAAS;AAAS,aAAKP,SAAL,CAAeQ,SAAf,GAA2B,CAA3B;AAA8B;;AAEhD,WAAK,EAAL;AAAS;AAAS,aAAKR,SAAL,CAAeS,OAAf,GAAyB,CAAzB;AAA4B;;AAC9C,WAAK,EAAL;AAAS;AAAU,aAAKT,SAAL,CAAeU,QAAf,GAA0B,CAA1B;AAA6B;;AAEhD,WAAK,EAAL;AAAS;AAAM,aAAKV,SAAL,CAAeW,QAAf,GAA0B,CAA1B;AAA6B;;AAC5C,WAAK,EAAL;AAAS;AAAM,aAAKX,SAAL,CAAeY,SAAf,GAA2B,CAA3B;AAA8B;AApB9C;;AAwBA,SAAKW,oBAAL;AACA,SAAKC,oBAAL;AAEA,GArCD;;AAuCA,OAAKC,KAAL,GAAa,UAAUR,KAAV,EAAkB;AAE9B,YAAQA,KAAK,CAACI,OAAd;AAEC,WAAK,EAAL;AAAS;AAAY,aAAKC,uBAAL,GAA+B,CAA/B;AAAkC;;AAEvD,WAAK,EAAL;AAAS;AAAM,aAAKtB,SAAL,CAAeK,OAAf,GAAyB,CAAzB;AAA4B;;AAC3C,WAAK,EAAL;AAAS;AAAM,aAAKL,SAAL,CAAeM,IAAf,GAAsB,CAAtB;AAAyB;;AAExC,WAAK,EAAL;AAAS;AAAM,aAAKN,SAAL,CAAeG,IAAf,GAAsB,CAAtB;AAAyB;;AACxC,WAAK,EAAL;AAAS;AAAM,aAAKH,SAAL,CAAeI,KAAf,GAAuB,CAAvB;AAA0B;;AAEzC,WAAK,EAAL;AAAS;AAAM,aAAKJ,SAAL,CAAeC,EAAf,GAAoB,CAApB;AAAuB;;AACtC,WAAK,EAAL;AAAS;AAAM,aAAKD,SAAL,CAAeE,IAAf,GAAsB,CAAtB;AAAyB;;AAExC,WAAK,EAAL;AAAS;AAAO,aAAKF,SAAL,CAAeO,OAAf,GAAyB,CAAzB;AAA4B;;AAC5C,WAAK,EAAL;AAAS;AAAS,aAAKP,SAAL,CAAeQ,SAAf,GAA2B,CAA3B;AAA8B;;AAEhD,WAAK,EAAL;AAAS;AAAS,aAAKR,SAAL,CAAeS,OAAf,GAAyB,CAAzB;AAA4B;;AAC9C,WAAK,EAAL;AAAS;AAAU,aAAKT,SAAL,CAAeU,QAAf,GAA0B,CAA1B;AAA6B;;AAEhD,WAAK,EAAL;AAAS;AAAM,aAAKV,SAAL,CAAeW,QAAf,GAA0B,CAA1B;AAA6B;;AAC5C,WAAK,EAAL;AAAS;AAAM,aAAKX,SAAL,CAAeY,SAAf,GAA2B,CAA3B;AAA8B;AApB9C;;AAwBA,SAAKW,oBAAL;AACA,SAAKC,oBAAL;AAEA,GA7BD;;AA+BA,OAAKE,SAAL,GAAiB,UAAUT,KAAV,EAAkB;AAElC,QAAK,KAAK5B,UAAL,KAAoBE,QAAzB,EAAoC;AAEnC,WAAKF,UAAL,CAAgBsC,KAAhB;AAEA;;AAEDV,IAAAA,KAAK,CAACW,cAAN;AACAX,IAAAA,KAAK,CAACY,eAAN;;AAEA,QAAK,KAAKlC,UAAV,EAAuB;AAEtB,WAAKI,WAAL;AAEA,KAJD,MAIO;AAEN,cAASkB,KAAK,CAACa,MAAf;AAEC,aAAK,CAAL;AAAQ,eAAK9B,SAAL,CAAeK,OAAf,GAAyB,CAAzB;AAA4B;;AACpC,aAAK,CAAL;AAAQ,eAAKL,SAAL,CAAeM,IAAf,GAAsB,CAAtB;AAAyB;AAHlC;;AAOA,WAAKiB,oBAAL;AAEA;AAED,GA5BD;;AA8BA,OAAKQ,SAAL,GAAiB,UAAUd,KAAV,EAAkB;AAElC,QAAK,CAAC,KAAKtB,UAAN,IAAoB,KAAKI,WAAL,GAAmB,CAA5C,EAAgD;AAE/C,UAAIiC,SAAS,GAAG,KAAKC,sBAAL,EAAhB;AACA,UAAIC,SAAS,GAAIF,SAAS,CAACG,IAAV,CAAgB,CAAhB,IAAsB,CAAvC;AACA,UAAIC,UAAU,GAAGJ,SAAS,CAACG,IAAV,CAAgB,CAAhB,IAAsB,CAAvC;AAEA,WAAKnC,SAAL,CAAeS,OAAf,GAA2B,EAAMQ,KAAK,CAACoB,KAAN,GAAcL,SAAS,CAACM,MAAV,CAAkB,CAAlB,CAAhB,GAA0CJ,SAA9C,IAA6DA,SAAxF;AACA,WAAKlC,SAAL,CAAeQ,SAAf,GAA6B,CAAIS,KAAK,CAACsB,KAAN,GAAcP,SAAS,CAACM,MAAV,CAAkB,CAAlB,CAAhB,GAA0CF,UAA5C,IAA2DA,UAAxF;AAEA,WAAKZ,oBAAL;AAEA;AAED,GAfD;;AAiBA,OAAKgB,OAAL,GAAe,UAAUvB,KAAV,EAAkB;AAEhCA,IAAAA,KAAK,CAACW,cAAN;AACAX,IAAAA,KAAK,CAACY,eAAN;;AAEA,QAAK,KAAKlC,UAAV,EAAuB;AAEtB,WAAKI,WAAL;AAEA,WAAKC,SAAL,CAAeS,OAAf,GAAyB,KAAKT,SAAL,CAAeQ,SAAf,GAA2B,CAApD;AAEA,KAND,MAMO;AAEN,cAASS,KAAK,CAACa,MAAf;AAEC,aAAK,CAAL;AAAQ,eAAK9B,SAAL,CAAeK,OAAf,GAAyB,CAAzB;AAA4B;;AACpC,aAAK,CAAL;AAAQ,eAAKL,SAAL,CAAeM,IAAf,GAAsB,CAAtB;AAAyB;AAHlC;;AAOA,WAAKiB,oBAAL;AAEA;;AAED,SAAKC,oBAAL;AAEA,GA1BD;;AA4BA,OAAKiB,MAAL,GAAc,UAAUC,KAAV,EAAkB;AAE/B,QAAIC,QAAQ,GAAGD,KAAK,GAAG,KAAKjD,aAA5B;AACA,QAAImD,OAAO,GAAGF,KAAK,GAAG,KAAKhD,SAA3B;AAEA,SAAKN,MAAL,CAAYyD,UAAZ,CAAwB,KAAKhC,UAAL,CAAgBiC,CAAhB,GAAoBH,QAA5C;AACA,SAAKvD,MAAL,CAAY2D,UAAZ,CAAwB,KAAKlC,UAAL,CAAgBmC,CAAhB,GAAoBL,QAA5C;AACA,SAAKvD,MAAL,CAAY6D,UAAZ,CAAwB,KAAKpC,UAAL,CAAgBqC,CAAhB,GAAoBP,QAA5C;AAEA,SAAK9C,aAAL,CAAmBsD,GAAnB,CAAwB,KAAKpC,cAAL,CAAoB+B,CAApB,GAAwBF,OAAhD,EAAyD,KAAK7B,cAAL,CAAoBiC,CAApB,GAAwBJ,OAAjF,EAA0F,KAAK7B,cAAL,CAAoBmC,CAApB,GAAwBN,OAAlH,EAA2H,CAA3H,EAA+HQ,SAA/H;AACA,SAAKhE,MAAL,CAAYiE,UAAZ,CAAuBC,QAAvB,CAAiC,KAAKzD,aAAtC,EAV+B,CAY/B;;AACA,SAAKT,MAAL,CAAYmE,QAAZ,CAAqBC,iBAArB,CAAwC,KAAKpE,MAAL,CAAYiE,UAApD,EAAgE,KAAKjE,MAAL,CAAYmE,QAAZ,CAAqBE,KAArF;AAGA,GAhBD;;AAkBA,OAAKlC,oBAAL,GAA4B,YAAW;AAEtC,QAAIlB,OAAO,GAAK,KAAKL,SAAL,CAAeK,OAAf,IAA4B,KAAKT,WAAL,IAAoB,CAAC,KAAKI,SAAL,CAAeM,IAAlE,GAA6E,CAA7E,GAAiF,CAA/F;AAEA,SAAKO,UAAL,CAAgBiC,CAAhB,GAAsB,CAAC,KAAK9C,SAAL,CAAeG,IAAhB,GAA0B,KAAKH,SAAL,CAAeI,KAA/D;AACA,SAAKS,UAAL,CAAgBmC,CAAhB,GAAsB,CAAC,KAAKhD,SAAL,CAAeE,IAAhB,GAA0B,KAAKF,SAAL,CAAeC,EAA/D;AACA,SAAKY,UAAL,CAAgBqC,CAAhB,GAAsB,CAAC7C,OAAD,GAAW,KAAKL,SAAL,CAAeM,IAAhD,CANsC,CAQtC;AAEA,GAVD;;AAYA,OAAKkB,oBAAL,GAA4B,YAAW;AAEtC,SAAKT,cAAL,CAAoB+B,CAApB,GAA0B,CAAC,KAAK9C,SAAL,CAAeQ,SAAhB,GAA4B,KAAKR,SAAL,CAAeO,OAArE;AACA,SAAKQ,cAAL,CAAoBiC,CAApB,GAA0B,CAAC,KAAKhD,SAAL,CAAeU,QAAhB,GAA4B,KAAKV,SAAL,CAAeS,OAArE;AACA,SAAKM,cAAL,CAAoBmC,CAApB,GAA0B,CAAC,KAAKlD,SAAL,CAAeY,SAAhB,GAA4B,KAAKZ,SAAL,CAAeW,QAArE,CAJsC,CAMtC;AAEA,GARD;;AAUA,OAAKsB,sBAAL,GAA8B,YAAW;AAExC,QAAK,KAAK5C,UAAL,IAAmBE,QAAxB,EAAmC;AAElC,aAAO;AACN4C,QAAAA,IAAI,EAAG,CAAE,KAAK9C,UAAL,CAAgBqE,WAAlB,EAA+B,KAAKrE,UAAL,CAAgBsE,YAA/C,CADD;AAENrB,QAAAA,MAAM,EAAG,CAAE,KAAKjD,UAAL,CAAgBuE,UAAlB,EAA+B,KAAKvE,UAAL,CAAgBwE,SAA/C;AAFH,OAAP;AAKA,KAPD,MAOO;AAEN,aAAO;AACN1B,QAAAA,IAAI,EAAG,CAAE2B,MAAM,CAACC,UAAT,EAAqBD,MAAM,CAACE,WAA5B,CADD;AAEN1B,QAAAA,MAAM,EAAG,CAAE,CAAF,EAAK,CAAL;AAFH,OAAP;AAKA;AAED,GAlBD;;AAoBA,WAAS2B,IAAT,CAAeC,KAAf,EAAsBC,EAAtB,EAA2B;AAE1B,WAAO,YAAY;AAElBA,MAAAA,EAAE,CAACC,KAAH,CAAUF,KAAV,EAAiBG,SAAjB;AAEA,KAJD;AAMA;;AAAA;AAED,OAAKhF,UAAL,CAAgBiF,gBAAhB,CAAkC,aAAlC,EAAiD,UAAWrD,KAAX,EAAmB;AAAEA,IAAAA,KAAK,CAACW,cAAN;AAAyB,GAA/F,EAAiG,KAAjG;AAEA,OAAKvC,UAAL,CAAgBiF,gBAAhB,CAAkC,WAAlC,EAA+CL,IAAI,CAAE,IAAF,EAAQ,KAAKlC,SAAb,CAAnD,EAA6E,KAA7E;AACA,OAAK1C,UAAL,CAAgBiF,gBAAhB,CAAkC,WAAlC,EAA+CL,IAAI,CAAE,IAAF,EAAQ,KAAKvC,SAAb,CAAnD,EAA6E,KAA7E;AACA,OAAKrC,UAAL,CAAgBiF,gBAAhB,CAAkC,SAAlC,EAA+CL,IAAI,CAAE,IAAF,EAAQ,KAAKzB,OAAb,CAAnD,EAA2E,KAA3E;AAEA,OAAKnD,UAAL,CAAgBiF,gBAAhB,CAAkC,SAAlC,EAA6CL,IAAI,CAAE,IAAF,EAAQ,KAAK9C,OAAb,CAAjD,EAAyE,KAAzE;AACA,OAAK9B,UAAL,CAAgBiF,gBAAhB,CAAkC,OAAlC,EAA6CL,IAAI,CAAE,IAAF,EAAQ,KAAKxC,KAAb,CAAjD,EAAuE,KAAvE;AAEA,OAAKF,oBAAL;AACA,OAAKC,oBAAL;AAEA,CAxQD;;AA0QA,SAAQrC,aAAa,IAAIoF,WAAzB","sourcesContent":["/**\n * @author James Baicoianu / http://www.baicoianu.com/\n */\n\nimport * as THREE from \"three\";\n\nvar __FlyControls;\n\n__FlyControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\tif ( domElement ) this.domElement.setAttribute( 'tabindex', -1 );\n\n\t// API\n\n\tthis.movementSpeed = 1.0;\n\tthis.rollSpeed = 0.005;\n\n\tthis.dragToLook = false;\n\tthis.autoForward = false;\n\n\t// disable default target object behavior\n\n\t// internals\n\n\tthis.tmpQuaternion = new THREE.Quaternion();\n\n\tthis.mouseStatus = 0;\n\n\tthis.moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, pitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\n\tthis.moveVector = new THREE.Vector3( 0, 0, 0 );\n\tthis.rotationVector = new THREE.Vector3( 0, 0, 0 );\n\n\tthis.handleEvent = function ( event ) {\n\n\t\tif ( typeof this[ event.type ] == 'function' ) {\n\n\t\t\tthis[ event.type ]( event );\n\n\t\t}\n\n\t};\n\n\tthis.keydown = function( event ) {\n\n\t\tif ( event.altKey ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//event.preventDefault();\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = .1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 1; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 1; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 1; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 1; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 1; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 1; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 1; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 1; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 1; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 1; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 1; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 1; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.keyup = function( event ) {\n\n\t\tswitch( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = 1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 0; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 0; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 0; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 0; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 0; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 0; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 0; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 0; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 0; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 0; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 0; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 0; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.mousedown = function( event ) {\n\n\t\tif ( this.domElement !== document ) {\n\n\t\t\tthis.domElement.focus();\n\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus ++;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 1; break;\n\t\t\t\tcase 2: this.moveState.back = 1; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t};\n\n\tthis.mousemove = function( event ) {\n\n\t\tif ( !this.dragToLook || this.mouseStatus > 0 ) {\n\n\t\t\tvar container = this.getContainerDimensions();\n\t\t\tvar halfWidth  = container.size[ 0 ] / 2;\n\t\t\tvar halfHeight = container.size[ 1 ] / 2;\n\n\t\t\tthis.moveState.yawLeft   = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth  ) / halfWidth;\n\t\t\tthis.moveState.pitchDown =   ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\n\n\t\t\tthis.updateRotationVector();\n\n\t\t}\n\n\t};\n\n\tthis.mouseup = function( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus --;\n\n\t\t\tthis.moveState.yawLeft = this.moveState.pitchDown = 0;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 0; break;\n\t\t\t\tcase 2: this.moveState.back = 0; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.update = function( delta ) {\n\n\t\tvar moveMult = delta * this.movementSpeed;\n\t\tvar rotMult = delta * this.rollSpeed;\n\n\t\tthis.object.translateX( this.moveVector.x * moveMult );\n\t\tthis.object.translateY( this.moveVector.y * moveMult );\n\t\tthis.object.translateZ( this.moveVector.z * moveMult );\n\n\t\tthis.tmpQuaternion.set( this.rotationVector.x * rotMult, this.rotationVector.y * rotMult, this.rotationVector.z * rotMult, 1 ).normalize();\n\t\tthis.object.quaternion.multiply( this.tmpQuaternion );\n\n\t\t// expose the rotation vector for convenience\n\t\tthis.object.rotation.setFromQuaternion( this.object.quaternion, this.object.rotation.order );\n\n\n\t};\n\n\tthis.updateMovementVector = function() {\n\n\t\tvar forward = ( this.moveState.forward || ( this.autoForward && !this.moveState.back ) ) ? 1 : 0;\n\n\t\tthis.moveVector.x = ( -this.moveState.left    + this.moveState.right );\n\t\tthis.moveVector.y = ( -this.moveState.down    + this.moveState.up );\n\t\tthis.moveVector.z = ( -forward + this.moveState.back );\n\n\t\t//console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n\n\t};\n\n\tthis.updateRotationVector = function() {\n\n\t\tthis.rotationVector.x = ( -this.moveState.pitchDown + this.moveState.pitchUp );\n\t\tthis.rotationVector.y = ( -this.moveState.yawRight  + this.moveState.yawLeft );\n\t\tthis.rotationVector.z = ( -this.moveState.rollRight + this.moveState.rollLeft );\n\n\t\t//console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n\n\t};\n\n\tthis.getContainerDimensions = function() {\n\n\t\tif ( this.domElement != document ) {\n\n\t\t\treturn {\n\t\t\t\tsize\t: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\n\t\t\t\toffset\t: [ this.domElement.offsetLeft,  this.domElement.offsetTop ]\n\t\t\t};\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\tsize\t: [ window.innerWidth, window.innerHeight ],\n\t\t\t\toffset\t: [ 0, 0 ]\n\t\t\t};\n\n\t\t}\n\n\t};\n\n\tfunction bind( scope, fn ) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply( scope, arguments );\n\n\t\t};\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n\n\tthis.domElement.addEventListener( 'mousemove', bind( this, this.mousemove ), false );\n\tthis.domElement.addEventListener( 'mousedown', bind( this, this.mousedown ), false );\n\tthis.domElement.addEventListener( 'mouseup',   bind( this, this.mouseup ), false );\n\n\tthis.domElement.addEventListener( 'keydown', bind( this, this.keydown ), false );\n\tthis.domElement.addEventListener( 'keyup',   bind( this, this.keyup ), false );\n\n\tthis.updateMovementVector();\n\tthis.updateRotationVector();\n\n};\n\nexport {__FlyControls as FlyControls};\n"]},"metadata":{},"sourceType":"module"}