{"ast":null,"code":"/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * From: https://github.com/gkjohnson/three.js/tree/examples-to-imports/examples/modules\n */\nimport * as THREE from \"three\";\n\nvar __OrbitControls; // This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/metaKey, or arrow keys / touch: two-finger move\n\n\n__OrbitControls = function __OrbitControls(object, domElement) {\n  this.object = object;\n  this.domElement = domElement !== undefined ? domElement : document; // Set to false to disable this control\n\n  this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n  this.target = new THREE.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n  this.minZoom = 0;\n  this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n\n  this.minPolarAngle = 0; // radians\n\n  this.maxPolarAngle = Math.PI; // radians\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\n  this.minAzimuthAngle = -Infinity; // radians\n\n  this.maxAzimuthAngle = Infinity; // radians\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n\n  this.enableDamping = false;\n  this.dampingFactor = 0.25; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0; // Set to false to disable rotating\n\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0; // Set to false to disable panning\n\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = false; // if true, pan in screen-space\n\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n  // Set to false to disable use of the keys\n\n  this.enableKeys = true; // The four arrow keys\n\n  this.keys = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    BOTTOM: 40\n  }; // Mouse buttons\n\n  this.mouseButtons = {\n    LEFT: THREE.MOUSE.LEFT,\n    MIDDLE: THREE.MOUSE.MIDDLE,\n    RIGHT: THREE.MOUSE.RIGHT\n  }; // for reset\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom; //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n    scope.update();\n    state = STATE.NONE;\n  }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n  this.update = function () {\n    var offset = new THREE.Vector3(); // so camera.up is the orbit axis\n\n    var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n    var quatInverse = quat.clone().inverse();\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n    return function update() {\n      var position = scope.object.position;\n      offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n      offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      spherical.theta += sphericalDelta.theta;\n      spherical.phi += sphericalDelta.phi; // restrict theta to be between desired limits\n\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta)); // restrict phi to be between desired limits\n\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n      spherical.makeSafe();\n      spherical.radius *= scale; // restrict radius to be between desired limits\n\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\n\n      scope.target.add(panOffset);\n      offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n      offset.applyQuaternion(quatInverse);\n      position.copy(scope.target).add(offset);\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1; // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n        scope.dispatchEvent(changeEvent);\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n        return true;\n      }\n\n      return false;\n    };\n  }();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n    window.removeEventListener(\"keydown\", onKeyDown, false); // scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  }; //\n  // internals\n  //\n\n\n  var scope = this;\n  var changeEvent = {\n    type: \"change\"\n  };\n  var startEvent = {\n    type: \"start\"\n  };\n  var endEvent = {\n    type: \"end\"\n  };\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_DOLLY_PAN: 4\n  };\n  var state = STATE.NONE;\n  var EPS = 0.000001; // current position in spherical coordinates\n\n  var spherical = new THREE.Spherical();\n  var sphericalDelta = new THREE.Spherical();\n  var scale = 1;\n  var panOffset = new THREE.Vector3();\n  var zoomChanged = false;\n  var rotateStart = new THREE.Vector2();\n  var rotateEnd = new THREE.Vector2();\n  var rotateDelta = new THREE.Vector2();\n  var panStart = new THREE.Vector2();\n  var panEnd = new THREE.Vector2();\n  var panDelta = new THREE.Vector2();\n  var dollyStart = new THREE.Vector2();\n  var dollyEnd = new THREE.Vector2();\n  var dollyDelta = new THREE.Vector2();\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = function () {\n    var v = new THREE.Vector3();\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n      v.multiplyScalar(-distance);\n      panOffset.add(v);\n    };\n  }();\n\n  var panUp = function () {\n    var v = new THREE.Vector3();\n    return function panUp(distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n      panOffset.add(v);\n    };\n  }(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n  var pan = function () {\n    var offset = new THREE.Vector3();\n    return function pan(deltaX, deltaY) {\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length(); // half of the fov is center to top of screen\n\n        targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we use only clientHeight here so aspect ratio does not distort speed\n\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n        panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\");\n        scope.enablePan = false;\n      }\n    };\n  }();\n\n  function dollyIn(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyOut(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n      scope.enableZoom = false;\n    }\n  } //\n  // event callbacks - update the object state\n  //\n\n\n  function handleMouseDownRotate(event) {\n    // console.log( 'handleMouseDownRotate' );\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    // console.log( 'handleMouseDownDolly' );\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    // console.log( 'handleMouseDownPan' );\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    // console.log( 'handleMouseMoveRotate' );\n    rotateEnd.set(event.clientX, event.clientY);\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n    rotateStart.copy(rotateEnd);\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    // console.log( 'handleMouseMoveDolly' );\n    dollyEnd.set(event.clientX, event.clientY);\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    // console.log( 'handleMouseMovePan' );\n    panEnd.set(event.clientX, event.clientY);\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n    pan(panDelta.x, panDelta.y);\n    panStart.copy(panEnd);\n    scope.update();\n  }\n\n  function handleMouseUp(event) {// console.log( 'handleMouseUp' );\n  }\n\n  function handleMouseWheel(event) {\n    // console.log( 'handleMouseWheel' );\n    if (event.deltaY < 0) {\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyIn(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n    // console.log( 'handleKeyDown' );\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    // console.log( 'handleTouchStartRotate' );\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchStartDollyPan(event) {\n    // console.log( 'handleTouchStartDollyPan' );\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n      var distance = Math.sqrt(dx * dx + dy * dy);\n      dollyStart.set(0, distance);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchMoveRotate(event) {\n    // console.log( 'handleTouchMoveRotate' );\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientHeight); // yes, height\n\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight);\n    rotateStart.copy(rotateEnd);\n    scope.update();\n  }\n\n  function handleTouchMoveDollyPan(event) {\n    // console.log( 'handleTouchMoveDollyPan' );\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n      var distance = Math.sqrt(dx * dx + dy * dy);\n      dollyEnd.set(0, distance);\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n      dollyIn(dollyDelta.y);\n      dollyStart.copy(dollyEnd);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n      panEnd.set(x, y);\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n      pan(panDelta.x, panDelta.y);\n      panStart.copy(panEnd);\n    }\n\n    scope.update();\n  }\n\n  function handleTouchEnd(event) {} // console.log( 'handleTouchEnd' );\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    switch (event.button) {\n      case scope.mouseButtons.LEFT:\n        if (event.ctrlKey || event.metaKey) {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        } else {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        }\n\n        break;\n\n      case scope.mouseButtons.MIDDLE:\n        if (scope.enableZoom === false) return;\n        handleMouseDownDolly(event);\n        state = STATE.DOLLY;\n        break;\n\n      case scope.mouseButtons.RIGHT:\n        if (scope.enablePan === false) return;\n        handleMouseDownPan(event);\n        state = STATE.PAN;\n        break;\n\n      default:\n        break;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n        handleMouseMoveRotate(event);\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n        handleMouseMoveDolly(event);\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n        handleMouseMovePan(event);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n    handleMouseUp(event);\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n    scope.dispatchEvent(startEvent);\n    handleMouseWheel(event);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) {\n      return;\n    }\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1:\n        // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n        handleTouchStartRotate(event);\n        state = STATE.TOUCH_ROTATE;\n        break;\n\n      case 2:\n        // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n        handleTouchStartDollyPan(event);\n        state = STATE.TOUCH_DOLLY_PAN;\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n      case 1:\n        // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?\n\n        handleTouchMoveRotate(event);\n        break;\n\n      case 2:\n        // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n        if (state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\n\n        handleTouchMoveDollyPan(event);\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n    handleTouchEnd(event);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    if (scope.enabled === false) return;\n    event.preventDefault();\n  } //\n\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n  window.addEventListener(\"keydown\", onKeyDown, false); // force an update at start\n\n  this.update();\n};\n\n__OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n__OrbitControls.prototype.constructor = __OrbitControls;\nObject.defineProperties(__OrbitControls.prototype, {\n  center: {\n    get: function get() {\n      console.warn(\"__OrbitControls: .center has been renamed to .target\");\n      return this.target;\n    }\n  },\n  // backward compatibility\n  noZoom: {\n    get: function get() {\n      console.warn(\"__OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\");\n      return !this.enableZoom;\n    },\n    set: function set(value) {\n      console.warn(\"__OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\");\n      this.enableZoom = !value;\n    }\n  },\n  noRotate: {\n    get: function get() {\n      console.warn(\"__OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\");\n      return !this.enableRotate;\n    },\n    set: function set(value) {\n      console.warn(\"__OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\");\n      this.enableRotate = !value;\n    }\n  },\n  noPan: {\n    get: function get() {\n      console.warn(\"__OrbitControls: .noPan has been deprecated. Use .enablePan instead.\");\n      return !this.enablePan;\n    },\n    set: function set(value) {\n      console.warn(\"__OrbitControls: .noPan has been deprecated. Use .enablePan instead.\");\n      this.enablePan = !value;\n    }\n  },\n  noKeys: {\n    get: function get() {\n      console.warn(\"__OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\");\n      return !this.enableKeys;\n    },\n    set: function set(value) {\n      console.warn(\"__OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\");\n      this.enableKeys = !value;\n    }\n  },\n  staticMoving: {\n    get: function get() {\n      console.warn(\"__OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\");\n      return !this.enableDamping;\n    },\n    set: function set(value) {\n      console.warn(\"__OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\");\n      this.enableDamping = !value;\n    }\n  },\n  dynamicDampingFactor: {\n    get: function get() {\n      console.warn(\"__OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\");\n      return this.dampingFactor;\n    },\n    set: function set(value) {\n      console.warn(\"__OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\");\n      this.dampingFactor = value;\n    }\n  }\n});\nexport { __OrbitControls as OrbitControls };","map":{"version":3,"sources":["/Users/admin/Documents/GitHub/group21WildLifeRefuge/src/js/three/OrbitControls.js"],"names":["THREE","__OrbitControls","object","domElement","undefined","document","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","MIDDLE","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","x","y","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDollyPan","dx","dy","sqrt","handleTouchMoveRotate","handleTouchMoveDollyPan","handleTouchEnd","preventDefault","button","ctrlKey","metaKey","addEventListener","stopPropagation","prototype","Object","create","EventDispatcher","constructor","defineProperties","center","get","noZoom","value","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","OrbitControls"],"mappings":"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","sourcesContent":["/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * From: https://github.com/gkjohnson/three.js/tree/examples-to-imports/examples/modules\n */\nimport * as THREE from \"three\";\n\nvar __OrbitControls;\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/metaKey, or arrow keys / touch: two-finger move\n\n__OrbitControls = function (object, domElement) {\n  this.object = object;\n\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new THREE.Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.25;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = false; // if true, pan in screen-space\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = true;\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  // Mouse buttons\n  this.mouseButtons = {\n    LEFT: THREE.MOUSE.LEFT,\n    MIDDLE: THREE.MOUSE.MIDDLE,\n    RIGHT: THREE.MOUSE.RIGHT\n  };\n\n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = (function () {\n    var offset = new THREE.Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new THREE.Quaternion().setFromUnitVectors(\n      object.up,\n      new THREE.Vector3(0, 1, 0)\n    );\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    return function update () {\n      var position = scope.object.position;\n\n      offset.copy(position).sub(scope.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      spherical.theta += sphericalDelta.theta;\n      spherical.phi += sphericalDelta.phi;\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max(\n        scope.minAzimuthAngle,\n        Math.min(scope.maxAzimuthAngle, spherical.theta)\n      );\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max(\n        scope.minPolarAngle,\n        Math.min(scope.maxPolarAngle, spherical.phi)\n      );\n\n      spherical.makeSafe();\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max(\n        scope.minDistance,\n        Math.min(scope.maxDistance, spherical.radius)\n      );\n\n      // move target to panned location\n      scope.target.add(panOffset);\n\n      offset.setFromSpherical(spherical);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(scope.target).add(offset);\n\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1;\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (\n        zoomChanged ||\n        lastPosition.distanceToSquared(scope.object.position) > EPS ||\n        8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n      ) {\n        scope.dispatchEvent(changeEvent);\n\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n\n        return true;\n      }\n\n      return false;\n    };\n  })();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    window.removeEventListener(\"keydown\", onKeyDown, false);\n\n    // scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n\n  var changeEvent = { type: \"change\" };\n  var startEvent = { type: \"start\" };\n  var endEvent = { type: \"end\" };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_DOLLY_PAN: 4\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new THREE.Spherical();\n  var sphericalDelta = new THREE.Spherical();\n\n  var scale = 1;\n  var panOffset = new THREE.Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new THREE.Vector2();\n  var rotateEnd = new THREE.Vector2();\n  var rotateDelta = new THREE.Vector2();\n\n  var panStart = new THREE.Vector2();\n  var panEnd = new THREE.Vector2();\n  var panDelta = new THREE.Vector2();\n\n  var dollyStart = new THREE.Vector2();\n  var dollyEnd = new THREE.Vector2();\n  var dollyDelta = new THREE.Vector2();\n\n  function getAutoRotationAngle () {\n    return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale () {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft (angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp (angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = (function () {\n    var v = new THREE.Vector3();\n\n    return function panLeft (distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  var panUp = (function () {\n    var v = new THREE.Vector3();\n\n    return function panUp (distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = (function () {\n    var offset = new THREE.Vector3();\n\n    return function pan (deltaX, deltaY) {\n      var element =\n        scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we use only clientHeight here so aspect ratio does not distort speed\n        panLeft(\n          (2 * deltaX * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n        panUp(\n          (2 * deltaY * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft(\n          (deltaX * (scope.object.right - scope.object.left)) /\n            scope.object.zoom /\n            element.clientWidth,\n          scope.object.matrix\n        );\n        panUp(\n          (deltaY * (scope.object.top - scope.object.bottom)) /\n            scope.object.zoom /\n            element.clientHeight,\n          scope.object.matrix\n        );\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\n          \"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"\n        );\n        scope.enablePan = false;\n      }\n    };\n  })();\n\n  function dollyIn (dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyOut (dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate (event) {\n    // console.log( 'handleMouseDownRotate' );\n\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly (event) {\n    // console.log( 'handleMouseDownDolly' );\n\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan (event) {\n    // console.log( 'handleMouseDownPan' );\n\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate (event) {\n    // console.log( 'handleMouseMoveRotate' );\n\n    rotateEnd.set(event.clientX, event.clientY);\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMoveDolly (event) {\n    // console.log( 'handleMouseMoveDolly' );\n\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMovePan (event) {\n    // console.log( 'handleMouseMovePan' );\n\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleMouseUp (event) {\n    // console.log( 'handleMouseUp' );\n  }\n\n  function handleMouseWheel (event) {\n    // console.log( 'handleMouseWheel' );\n\n    if (event.deltaY < 0) {\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyIn(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown (event) {\n    // console.log( 'handleKeyDown' );\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n      default:\n        break;\n    }\n  }\n\n  function handleTouchStartRotate (event) {\n    // console.log( 'handleTouchStartRotate' );\n\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchStartDollyPan (event) {\n    // console.log( 'handleTouchStartDollyPan' );\n\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      var distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyStart.set(0, distance);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchMoveRotate (event) {\n    // console.log( 'handleTouchMoveRotate' );\n\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleTouchMoveDollyPan (event) {\n    // console.log( 'handleTouchMoveDollyPan' );\n\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      var distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyEnd.set(0, distance);\n\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n      dollyIn(dollyDelta.y);\n\n      dollyStart.copy(dollyEnd);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panEnd.set(x, y);\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n    }\n\n    scope.update();\n  }\n\n  function handleTouchEnd (event) {\n    // console.log( 'handleTouchEnd' );\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.button) {\n      case scope.mouseButtons.LEFT:\n        if (event.ctrlKey || event.metaKey) {\n          if (scope.enablePan === false) return;\n\n          handleMouseDownPan(event);\n\n          state = STATE.PAN;\n        } else {\n          if (scope.enableRotate === false) return;\n\n          handleMouseDownRotate(event);\n\n          state = STATE.ROTATE;\n        }\n\n        break;\n\n      case scope.mouseButtons.MIDDLE:\n        if (scope.enableZoom === false) return;\n\n        handleMouseDownDolly(event);\n\n        state = STATE.DOLLY;\n\n        break;\n\n      case scope.mouseButtons.RIGHT:\n        if (scope.enablePan === false) return;\n\n        handleMouseDownPan(event);\n\n        state = STATE.PAN;\n\n        break;\n      default:\n        break;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleMouseMoveRotate(event);\n\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n\n        handleMouseMoveDolly(event);\n\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n\n        handleMouseMovePan(event);\n\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function onMouseUp (event) {\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel (event) {\n    if (\n      scope.enabled === false ||\n      scope.enableZoom === false ||\n      (state !== STATE.NONE && state !== STATE.ROTATE)\n    ) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    scope.dispatchEvent(startEvent);\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown (event) {\n    if (\n      scope.enabled === false ||\n      scope.enableKeys === false ||\n      scope.enablePan === false\n    ) {\n      return;\n    }\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n\n        handleTouchStartRotate(event);\n\n        state = STATE.TOUCH_ROTATE;\n\n        break;\n\n      case 2: // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n\n        handleTouchStartDollyPan(event);\n\n        state = STATE.TOUCH_DOLLY_PAN;\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?\n\n        handleTouchMoveRotate(event);\n\n        break;\n\n      case 2: // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n        if (state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\n\n        handleTouchMoveDollyPan(event);\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd (event) {\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n  }\n\n  //\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\n  window.addEventListener(\"keydown\", onKeyDown, false);\n\n  // force an update at start\n\n  this.update();\n};\n\n__OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n__OrbitControls.prototype.constructor = __OrbitControls;\n\nObject.defineProperties(__OrbitControls.prototype, {\n  center: {\n    get: function () {\n      console.warn(\"__OrbitControls: .center has been renamed to .target\");\n      return this.target;\n    }\n  },\n\n  // backward compatibility\n\n  noZoom: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      return !this.enableZoom;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      this.enableZoom = !value;\n    }\n  },\n\n  noRotate: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      return !this.enableRotate;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      this.enableRotate = !value;\n    }\n  },\n\n  noPan: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      return !this.enablePan;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      this.enablePan = !value;\n    }\n  },\n\n  noKeys: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      return !this.enableKeys;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      this.enableKeys = !value;\n    }\n  },\n\n  staticMoving: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      return !this.enableDamping;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      this.enableDamping = !value;\n    }\n  },\n\n  dynamicDampingFactor: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      return this.dampingFactor;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      this.dampingFactor = value;\n    }\n  }\n});\n\nexport { __OrbitControls as OrbitControls };\n"]},"metadata":{},"sourceType":"module"}